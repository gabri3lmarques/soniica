document.querySelectorAll(".category-menu .category-menu_header").forEach(i=>{i.addEventListener("click",()=>{var t=i.parentElement,e=t.classList.contains("active");document.querySelectorAll(".category-menu").forEach(t=>{t.classList.remove("active")}),e||t.classList.add("active")})});class Player{constructor(){this.audio=new Audio,this.currentSong=null,this.currentPlaylist=null,this.isPlaying=!1,this.isLooping=!1,this.isRandom=!1,this.titleElement=document.querySelector(".current-title"),this.artistElement=document.querySelector(".current-artist"),this.timeElement=document.querySelector(".current-time"),this.totalTimeElement=document.querySelector(".total-time"),this.genresElement=document.querySelector(".current-genres"),this.thumbElement=document.querySelector(".current-thumb"),this.playPauseButton=document.querySelector(".play-pause"),this.nextButton=document.querySelector(".next"),this.previousButton=document.querySelector(".previous"),this.loopButton=document.querySelector(".loop"),this.randomButton=document.querySelector(".random"),this.progressBarContainer=document.querySelector(".progress-bar-container"),this.progressBar=document.querySelector(".progress-bar"),this.volumeSlider=document.querySelector("#volume-slider"),this.volumeIcon=document.querySelector(".volume-icon"),this.barPlayer=document.querySelector(".sound-wave-player"),this.addToPlaylistFormContainer=document.querySelector(".add-to-playlist-form-hidden"),this.tagsContainer=document.querySelector(".current-genres"),this.playPauseButton.addEventListener("click",()=>this.togglePlayPause()),this.nextButton.addEventListener("click",()=>this.next()),this.previousButton.addEventListener("click",()=>this.previous()),this.loopButton.addEventListener("click",()=>this.toggleLoop()),this.randomButton.addEventListener("click",()=>this.toggleRandom()),this.audio.addEventListener("timeupdate",()=>this.updateProgressBar()),this.audio.addEventListener("ended",()=>this.handleSongEnd()),this.volumeSlider.addEventListener("input",t=>this.adjustVolume(t)),this.audio.addEventListener("timeupdate",()=>this.updateTimeDisplay()),this.audio.addEventListener("loadedmetadata",()=>this.setTotalTime()),this.progressBarContainer.addEventListener("click",t=>this.seek(t)),this.progressBarContainer.addEventListener("mousedown",t=>this.startDrag(t)),this.initializeFirstSong(),this.audio.volume=this.volumeSlider.value}getSongTags(){var t;this.currentSong&&(t=this.currentSong.querySelector("div[data-tags]").getAttribute("data-tags"),this.tagsContainer.innerHTML=t)}initializeAddToPlaylistForm(){var t;this.currentSong&&(t=this.currentSong.querySelector(".source"))&&(t=t.dataset.content,this.addToPlaylistFormContainer)&&(this.addToPlaylistFormContainer.innerHTML=t)}setTotalTime(){var t;isNaN(this.audio.duration)||(t=this.audio.duration,this.totalTimeElement.textContent=this.formatTime(t),this.timeElement.textContent=this.formatTime(t),this.getSongTags())}updateTimeDisplay(){var t;isNaN(this.audio.duration)||(t=this.audio.duration-this.audio.currentTime,this.timeElement.textContent=this.formatTime(t))}formatTime(t){var e=Math.floor(t/60),t=Math.floor(t%60);return String(e).padStart(2,"0")+":"+String(t).padStart(2,"0")}adjustVolume(t){t=t.target.value;0==(this.audio.volume=t)?this.volumeIcon.classList.add("zero"):this.volumeIcon.classList.remove("zero")}initializeFirstSong(){var t,e=document.querySelector(".playlist");e&&(t=e.querySelector(".song"))&&(this.currentPlaylist=e,this.currentSong=t,this.audio.src=t.dataset.src,this.updatePlayerInfo(t),this.audio.load(),this.initializeAddToPlaylistForm(),this.getSongTags())}toggleRandom(){this.isRandom=!this.isRandom,this.isRandom?this.randomButton.classList.add("active"):this.randomButton.classList.remove("active")}getRandomSong(){var t=[...this.currentPlaylist.querySelectorAll(".song")];let e;for(;e=t[Math.floor(Math.random()*t.length)],this.initializeAddToPlaylistForm(),e===this.currentSong&&1<t.length;);return e}getNextSong(){var t,e;return this.isRandom?this.getRandomSong():(e=(t=[...this.currentPlaylist.querySelectorAll(".song")]).findIndex(t=>t===this.currentSong),t[e+1]||(this.isLooping?t[0]:null))}getPreviousSong(){var t=[...this.currentPlaylist.querySelectorAll(".song")],e=t.findIndex(t=>t===this.currentSong);return t[e-1]||(this.isLooping?t[t.length-1]:null)}play(t,e){var i=t.dataset.src;this.currentSong&&this.currentSong!==t&&(this.currentSong.querySelector(".play-button").classList.remove("active"),this.currentSong.classList.remove("active")),this.audio.src!==i&&(this.audio.src=i),this.audio.play(),this.isPlaying=!0,this.currentSong=t,this.initializeAddToPlaylistForm(),this.currentPlaylist=e,this.updatePlayerInfo(t),this.syncButtons(t),this.getSongTags()}pause(t){this.audio.pause(),this.isPlaying=!1,t.querySelector(".play-button").classList.remove("active"),t.classList.remove("active"),this.playPauseButton.classList.remove("active"),this.barPlayer.classList.remove("active")}togglePlayPause(){this.isPlaying?this.pause(this.currentSong):(this.audio.play(),this.isPlaying=!0,this.currentSong.querySelector(".play-button").classList.add("active"),this.currentSong.classList.add("active"),this.playPauseButton.classList.add("active"),this.barPlayer.classList.add("active"))}toggleLoop(){this.isLooping=!this.isLooping,this.isLooping?this.loopButton.classList.add("active"):this.loopButton.classList.remove("active")}next(){var t=this.getNextSong();t&&this.play(t,this.currentPlaylist)}previous(){var t;2<this.audio.currentTime?this.audio.currentTime=0:(t=this.getPreviousSong())&&this.play(t,this.currentPlaylist)}handleSongEnd(){var t=this.getNextSong();t?this.play(t,this.currentPlaylist):(this.isPlaying=!1,this.audio.currentTime=0,this.syncButtons(null))}updatePlayerInfo(t){this.titleElement.textContent=t.querySelector(".title").textContent,this.artistElement.textContent=t.querySelector(".artist").textContent;var e=[...t.querySelectorAll(".genres li")].map(t=>t.textContent),e=(this.genresElement.textContent=e.join(", "),t.querySelector(".thumb").src);this.thumbElement.src=e}syncButtons(t){document.querySelectorAll(".play-button").forEach(t=>t.classList.remove("active")),document.querySelectorAll(".song").forEach(t=>t.classList.remove("active")),t?(t.querySelector(".play-button").classList.add("active"),t.classList.add("active"),this.playPauseButton.classList.add("active"),this.barPlayer.classList.add("active")):(this.playPauseButton.classList.remove("active"),this.barPlayer.classList.remove("active"))}updateProgressBar(){var t=this.audio.currentTime/this.audio.duration*100;this.progressBar.style.width=t+"%"}seek(t){var e=this.progressBarContainer.getBoundingClientRect(),t=t.clientX-e.left;this.audio.currentTime=t/e.width*this.audio.duration}startDrag(t){let e=t=>this.seek(t),i=()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",i)};document.addEventListener("mousemove",e),document.addEventListener("mouseup",i),this.seek(t)}}let player=new Player,glideElement=(document.querySelectorAll(".playlist").forEach(e=>{e.querySelectorAll(".song").forEach(t=>{t.querySelector(".play-button").addEventListener("click",()=>{player.currentSong===t&&player.isPlaying?player.pause(t):(player.play(t,e),player.initializeAddToPlaylistForm())})})}),document.addEventListener("DOMContentLoaded",()=>{if(document.getElementById("create-playlist-btn")){var t=document.getElementById("create-playlist-btn");let i=document.getElementById("playlist-feedback");t.addEventListener("click",async()=>{var t=document.getElementById("playlist_name"),e=t.value.trim();if(e)try{await createPlaylist(e),i.textContent=`Playlist "${e}" criada com sucesso!`,i.style.color="green",t.value=""}catch(t){i.textContent="Erro ao criar a playlist.",i.style.color="red",console.error("Erro ao criar a playlist:",t)}else i.textContent="O nome da playlist nÃ£o pode estar vazio.",i.style.color="red"})}}),document.querySelector(".splide")),loginLink=(glideElement&&new Splide(".splide",{type:"fade",perPage:1,arrows:!1,autoplay:!0,interval:6e3,speed:2e3,rewind:!0}).mount(),document.querySelector(".login_link")),userIcon=document.querySelector(".user-icon"),input=(loginLink.addEventListener("mouseover",()=>{userIcon.classList.add("active")}),loginLink.addEventListener("mouseout",()=>{userIcon.classList.remove("active")}),document.getElementById("s")),searchForm=document.querySelector(".searchform");input.addEventListener("focus",()=>{searchForm.classList.add("active")}),input.addEventListener("blur",()=>{searchForm.classList.remove("active")});
//# sourceMappingURL=main.min.js.map
